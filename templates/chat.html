<html>

<head>
    <title>5nuk's Chatroom</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <style>
        .container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}div{display:block}body{font-family:Poppins,Arial,sans-serif;font-size:16px;line-height:1.8;font-weight:400;background:#fafafa;color:#666}:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.ftco-section{padding:7em 0}.justify-content-center{-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}.row{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.text-center{text-align:center!important}.mb-5,.my-5{margin-bottom:3rem!important}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto,.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-auto,.col-xl,.col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9,.col-xl-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.heading-section{font-size:28px;color:#000}.h1,.h2,.h3,.h4,.h5,h1,h2,h3,h4,h5{line-height:1.5;font-weight:400;font-family:Poppins,Arial,sans-serif;color:#000;margin-top:0;margin-bottom:.5rem}.wrapper{width:100%;-webkit-box-shadow:0 21px 41px -13px rgb(0 0 0 / 18%);-moz-box-shadow:0 21px 41px -13px rgba(0,0,0,.18);box-shadow:0 21px 41px -13px rgb(0 0 0 / 18%)}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.contact-wrap{background:#7f279c;background:-moz-linear-gradient(-45deg,#7f279c 0,#2e279d 100%);background:-webkit-gradient(left top,right bottom,color-stop(0,#7f279c),color-stop(100%,#2e279d));background:-webkit-linear-gradient(-45deg,#7f279c 0,#2e279d 100%);background:-o-linear-gradient(-45deg,#7f279c 0,#2e279d 100%);background:-ms-linear-gradient(-45deg,#7f279c 0,#2e279d 100%);background:-webkit-linear-gradient(315deg,#7f279c 0,#2e279d 100%);background:-o-linear-gradient(315deg,#7f279c 0,#2e279d 100%);background:linear-gradient(135deg,#7f279c 0,#2e279d 100%)}.w-100{width:100%!important}.contact-wrap h3{color:#fff}.mb-4,.my-4{margin-bottom:1.5rem!important}.h3,h3{font-size:1.75rem}.info-wrap h3{color:#000;position:relative}.info-wrap h3:after{position:absolute;bottom:0;left:0;width:60px;height:3px;background:#d62196;content:''}#form-message-warning{color:#f65c78}#form-message-success,#form-message-warning{display:none}#form-message-success{color:#28a745;font-size:18px;font-weight:500}#form-message-success,#form-message-warning{display:none}form{display:block;margin-top:0;margin-block-end:1em}@media (min-width:768px){.col-md-12{-webkit-box-flex:0;-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}}@media (min-width:992px){.p-lg-5{padding:3rem!important}}@media (min-width:1200px){.container{max-width:1140px}}@media (min-width:768px){.col-md-6{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}}@media (min-width:768px){.col-md-10{-webkit-box-flex:0;-ms-flex:0 0 83.33333%;flex:0 0 83.33333%;max-width:83.33333%}}@media (min-width:768px){.col-md-6{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}}.form-group{margin-bottom:1rem}.contactForm .form-control{border:none;border-bottom:1px solid rgba(255,255,255,.2)}textarea.form-control{height:inherit!important}.form-control{height:52px;background:0 0;font-size:14px;border-radius:0;-webkit-box-shadow:none!important;box-shadow:none!important;border:1px solid rgba(255,255,255,.2);display:block;width:100%;height:calc(1.5em + .75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;-webkit-transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;-o-transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-box-shadow .15s ease-in-out}.form-control:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;-webkit-box-shadow:0 0 0 .2rem rgba(0,123,255,.25);box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}textarea{overflow:auto;resize:vertical}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}.btn.btn-primary{background:#d62196!important;border-color:#d62196!important;color:#fff}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,-webkit-box-shadow .15s ease-in-out;-o-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out,-webkit-box-shadow .15s ease-in-out}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}button,input{overflow:visible}.submitting{float:left;width:100%;padding:10px 0;display:none;font-size:16px;font-weight:500;color:#28a745}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}.d-flex{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.align-items-stretch{-webkit-box-align:stretch!important;-ms-flex-align:stretch!important;align-items:stretch!important}.form-control{height:52px;background:0 0;color:rgba(255,255,255,.8)!important;font-size:14px;border-radius:0;-webkit-box-shadow:none!important;box-shadow:none!important;border:1px solid rgba(255,255,255,.2)}.form-control::-webkit-input-placeholder{color:rgba(255,255,255,.5)!important}.form-control::-moz-placeholder{color:rgba(255,255,255,.5)!important}.form-control:-ms-input-placeholder{color:rgba(255,255,255,.5)!important}.form-control:-moz-placeholder{color:rgba(255,255,255,.5)!important}.form-control:active,.form-control:focus{background:0 0;border-color:rgba(255,255,255,.5)!important}
    </style>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,700" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" >
</head>

<body>
    <section class="ftco-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6 text-center mb-5">
                    <h2 class="heading-section">5nuk's Chatroom</h2>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="wrapper">
                        <div class="row no-gutters">
                            <div class="col-md-6">
                                <div class="contact-wrap w-100 p-lg-5 p-4">
                                    <h3 class="mb-4">Send a message</h3>
                                    <div id="form-message-warning" class="mb-4"></div>
                                    <div id="form-message-success" class="mb-4">
                                        Your message was sent, thank you!
                                    </div>
                                    <form method="POST" id="chatbox" name="chatbox" class="contactForm" novalidate="novalidate">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    {{.UserData.name}}:<br/>
                                                    <textarea class="form-control" cols="30" rows="6"
                                                        placeholder="Message"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <input type="submit" value="Send Message" class="btn btn-primary">
                                                    <div class="submitting"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="col-md-6 d-flex align-items-stretch">
                                <div class="info-wrap w-100 p-lg-5 p-4 img">
                                    <h3>All messages:</h3>

                                    <div class="dbox w-100 d-flex">
                                        <div class="icon d-flex align-items-center justify-content-center">
                                            <span class="fa fa-globe"></span>
                                        </div>
                                        <div class="text pl-3">                                            
                                            <ul id="messages"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        $(function () {
            var socket = null;
            var msgBox = $("#chatbox textarea");
            var messages = $("#messages");
            $("#chatbox").submit(function () {
                if (!msgBox.val()) return false;
                if (!socket) {
                    alert("Error: There is no socket connection.");
                    return false;
                }
                socket.send(JSON.stringify({"Message": msgBox.val()}));
                msgBox.val("");
                return false;
            });
            if (!window["WebSocket"]) {
                alert("Error: Your browser does not support web sockets.")
            } else {
                socket = new WebSocket("ws://{{.Host}}/room");
                socket.onclose = function () {
                    alert("Connection has been closed.");
                }
                socket.onmessage = function(e) {
                    var msg = eval("("+e.data+")");
                    messages.append(
                        $("<li>").append(
                            $("<strong>").text(msg.Name + " @ " + msg.When + ": "),
                            $("<span>").text(msg.Message)
                        )
                    );
                }
            }
        });
    </script>
</body>

</html>